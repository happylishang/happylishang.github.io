# 背景、能力、难点、实践、收益、展望


### 背景：APP端上安全在谈什么

APP的每个业务场景都有其既定的运行模式，若被人为破坏就可认为它是不安全的。举个栗子，比如秒杀场景：大量用户在特定时间点，通过点击抢购来秒杀优惠商品，从而营造一种紧迫而有噱头的营销场景，但如果能通过非法手段自动抢购、甚至提前开始刷接口抢购，那就彻底破坏了业务的玩法，这就是一种不安全的运行模式。再比如常用的用户拉新场景：新客获取成本高达200左右，所有产品的拉新投入都蛮高，如何获得真正的新用户而不是羊毛党也是拉新必须处理的事，一般而言，新设备+新账户是新用户的基本条件，但新账户的成本其实不高，大部分是要靠新设备来识别的，但如果能通过非法手段不断模拟新设备，那拉新投入带来的新用户可能大部分都是无效的羊毛党，这也可看做是一种不安全的运行场景，甚至还有二次篡改，构建马甲APP等各种场景。APP端上安全要做的就是甄别并防范这种异常场景的发生，简而言之它就是：一种确保**官方APP**在**既定业务模型**中运行的能力。

### APP端上安全体系应该具备哪些能力

一个安全体系要具备哪些能力呢，简单说可分两块：**甄别与防御**。即一：甄别运行环境是否安全的能力，二：针对不同的场景作出不同的防御的能力，场景千变万化，所以防御手段也没有一剑破万法的能力，基本都要根据具体的风险场景，产出不同的应对方案，但是整体涉及的流程基本一致，如下：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2117dc50f5f844cfae3662459ee8560c~tplv-k3u1fbpfcp-watermark.image?)

要做的事情就是围绕四个阶段构建不同的能力。先看第一阶段：风险场景的假设，预判有哪些风险场景，从AppStore或者官方应用市场下载，安装、正常使用，这是理想中的运行模式，但不安分的用户千千万，异常场景也多变，不存在一剑破万法的说法，这里人为做了一些场景归类：

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aec456c0164244cd8feb3b17fc3a11e8~tplv-k3u1fbpfcp-watermark.image?)

相应的安全体系建设必须能覆盖以上几种风险类型，简单说大概分四类

> 不按既定的业务模型走




* 不在预期的设备中运行
* 不在既定的官方APP中运行
*  核心业务玩法被侦测与破解

## 大家都是怎么做


* 甄别
* 捕获
* 防御：主动与被动

Android生态 电商类的业务通常会有各种的权益、优惠为了获取

所有权益及资产类的业务都避免不了与后端的交互，




####  工程安全：人员管理+代码管理
#### proguard入手，这是最简单的加密，成本最低，而且可以比较有效的扼杀一些在破解边缘徘徊的初级破解者，让他们能够悬崖勒马，浪子回头，然而，对于真正想要破解的人来说，混淆只等于加大了一点阅读难度而已， 相信做开发的同学基本上也都反编译过别人家的App，通过像jadx、apktool、dex2jar这样的反编译工具  到对于主流的加固技术，相应的破解技术也是非常成熟的，所以说，虽然技术很牛逼，但只要破解者知道了你加固的方式，就可以轻而易举的找到破解的方法，也就是比proguard多了一次Google的过程。
####  运行时安全
####  反向侦测：
####  防刷  
####  真机识别：
####  设备指纹
####  运行环境
####  核心信息加密
####  代码隔离
####  用户行为 埋点+人机系别
#### 核心算法逻辑的安全

# AndroidKeyStore


# 量子加密、白盒加密、人工智能分析，这些基本都是下一代的安全策略，就当前来说，还比较虚幻，不过只要技术一旦成熟，一定将是划时代的里程碑。

 
 