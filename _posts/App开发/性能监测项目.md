## 背景



* 缺乏一套有效的APP性能监测机制
* 缺少一个基线（针对什么设备，什么标准）


## 方案选择

* 腾讯matrix 太重且不稳定（crash有些多，升级兼容问题）
* GT  重    3年没更新
* Emmagee   3年没更新 不支持7.0以后
* DoraemonKit 哆啦A梦
* 听云App    收费，关注网络跟启动
* 自研  ：支持多种维度，安全，订制

## 核心性能指标

* 网络状况（Net）
* 崩溃（Crash）
* 内存使用及内存泄露（MEM）
* CPU使用率（CPU） ：还不知道有什么用
* 页面刷新帧率、卡顿（FPS）
* 流量消耗（Flow）
* 电量
* 启动时间

## 基线的制定（参考业界或者先线上跑跑）

1、UI线程所有Msg执行都算掉帧 
2、掉帧检测
3、FPS计算逻辑
4、卡顿掉帧指标计算

## 实现方案


## 推进计划

## 上线及后续使用跟进


## 启动耗时

只需要以startActivity执行为起始点，以第一帧渲染为结束点，就能得出一个较为准确的耗时。

Launch耗时可以通过onCreate、onRestoreInstanceState、onStart、onResume四个函数的耗时相加得出。在这四个方法中，onCreate一般是最重的那个方法，因为很多变量的初始化都会放在这里进行。另外，onCreate方法中还有个耗时大户是LayoutInfalter.infalte方法，调用setContentView会执行到这个方法，对于一些复杂布局的第一次解析，会消耗大量时间。由于这四个方法是同步顺序执行的，单独把某些操作从onCreate移到onResume之类的并没有什么意义，Launch耗时只关心这几个方法的总耗时。
 
*  onWindowFocusChanged

 onWindowFocusChanged是测量第一次可见的时机 onresume跟onwindowforceChange一般不做耗时操作
 


 
 
 
